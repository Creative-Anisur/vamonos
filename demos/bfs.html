<html><head>

    <link rel="stylesheet" href="../lib/vamonos.css">
    <link rel="stylesheet" href="demos.css">
    <script type="text/javascript" src="../deps/jquery.min.js"></script>
    <script type="text/javascript" src="../deps/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../lib/vamonos.js"></script>

</head><body>

    <h1>Breadth-First Search</h1>


    <div class="vamonos">
        <table>
            <tr><td>
                <div class="container" id="pseudocode" title="BFS(G,s):">
                    for each vertex u &in; G.V - {s}
                        u.color = white
                    s.color = gray
                    Q = &empty;
                    Q.enqueue(s)
                    while Q &ne; &empty;
                        u = Q.dequeue()
                        for each v &in; G.Adj[u]
                            if v.color == white
                                v.color = gray
                                Q.enqueue(v)
                        u.color = black
                </div>
                <br>
                <div id="controls"></div>
        <br>
        </td><td>
            <div class="container" id="graph"></div>
        </td></tr></table>
    </div>

    <script type="text/javascript">

        var myviz = new Vamonos.Visualizer({
            widgets: [

                new Vamonos.Widget.Console(),

                new Vamonos.Widget.Hardcoded({
                    G: new Vamonos.DataStructure.Graph({
                        vertices : [
                            {id: 'v0', xcPos: 100, ycPos: 081},
                            {id: 'v1', xcPos: 329, ycPos: 012},
                            {id: 'v2', xcPos: 272, ycPos: 104},
                            {id: 'v3', xcPos: 393, ycPos: 272},
                            {id: 'v4', xcPos: 052, ycPos: 217},
                            {id: 'v5', xcPos: 131, ycPos: 325},
                            {id: 'v6', xcPos: 267, ycPos: 369},
                            {id: 'v7', xcPos: 497, ycPos: 353},
                            {id: 'v8', xcPos: 514, ycPos: 155},
                            {id: 'v9', xcPos: 253, ycPos: 200}
                        ],
                        edges : [
                            {source: 'v0',target: 'v1'},
                            {source: 'v0',target: 'v2'},
                            {source: 'v1',target: 'v3'},
                            {source: 'v1',target: 'v8'},
                            {source: 'v2',target: 'v4'},
                            {source: 'v2',target: 'v3'},
                            {source: 'v4',target: 'v0'},
                            {source: 'v1',target: 'v2'},
                            {source: 'v3',target: 'v4'},
                            {source: 'v4',target: 'v5'},
                            {source: 'v5',target: 'v6'},
                            {source: 'v6',target: 'v7'},
                            {source: 'v8',target: 'v7'},
                            {source: 'v2',target: 'v9'}
                        ]
                    })
                }),

                new Vamonos.Widget.Pseudocode({
                    container: "pseudocode",
                    setAllBreakpoints: true
                }),

                new Vamonos.Widget.Controls({
                    container: "controls",
                    showWhileSliding: true
                }),

            ],

            algorithm: function (viz) {
                with (viz.stash) {

                    s = G.vertices[1];

                    for (var i = G.vertices.length - 1; viz.line(1), i >= 0; i--) {
                        u = G.vertices[i];
                        if (u === s) {
                            continue;
                        }
                        u.color = "white";
                        viz.line(2);
                    }

                    s.color = "gray";
                    viz.line(3);

                    Q = new Vamonos.DataStructure.Queue();
                    viz.line(4);

                    Q.enqueue(s);
                    viz.line(5);

                    while (viz.line(6), !Q.isEmpty()) {

                        u = Q.dequeue();
                        viz.line(7);

                        var adj = G.neighbors(u);
                        for (var j = 0; j < adj.length; j++) {
                            v = adj[j];
                            viz.line(8);

                            if (viz.line(9), v.color === "white") {
                                v.color = "gray";
                                viz.line(10);
                                Q.enqueue(v);
                                viz.line(11);
                            }

                        }
                        u.color = "black";
                        viz.line(12);
                    }
                }
            }
        });

    </script>

</body>
</html>
