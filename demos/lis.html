<html><head>

    <link rel="stylesheet" href="../lib/vamonos.css">
    <link rel="stylesheet" href="demos.css">
    <script type="text/javascript" src="../lib/vamonos-all.js"></script>

</head><body>

    <h1>Longest Increasing Subsequence</h1>

    <table class="vamonos">
        <tr><td class="pseudocode-and-controls">

            <div id="controls"></div>

            <div class="pseudocode-procedures">
                <div id="pseudocode" title="LIS(A):">
                    opt[0] = 0
                    sol[0] = []
                    for k = 1 to A.length
                        opt[k] = 1
                        sol[k] = [A[k]]
                        for i = 1 to k-1
                            if A[i] &lt; A[k] and opt[k] &lt; opt[i] + 1
                                opt[k] = opt[i] + 1
                                sol[k] = sol[i] + [A[i]]
                    best = 1
                    for j = 2 to A.length
                        if opt[best] &lt; opt[j]
                            best = j
                </div>
            </div>

        </td><td class="variable-widgets">
            <table class="variable-widgets">
                <tr><td><div id="i-var"></div></td>
                    <td><div id="i"></div></td>
                </tr>
                <tr><td><div id="k-var"></div></td>
                    <td><div id="k"></div></td>
                </tr>
                <tr><td><div id="A-var"></div></td>
                    <td><div id="A"></div></td>
                </tr>
                <tr><td><div id="sol-var"></div></td>
                    <td><div id="sol"></div></td></tr>
                <tr><td><div id="opt-var"></div></td>
                    <td><div id="opt"></div></td></tr>
                </tr>
            </table>

        <div id="arrays">

        </td></tr>
    </table>

    </div>

</body>
<script type="text/javascript">
var myviz = new Vamonos.Visualizer({
    widgets: [

        new Vamonos.Widget.VarName({
            container: "A-var",
            varName: "A",
        }),

        new Vamonos.Widget.Array({
            container: "A",
            varName: "A",
            defaultInput: [0, 3,1,4,1,5,9,2,6,5],
            ignoreIndexZero: true,
            cssRules: [[">", "k", "shaded"]],
            showIndices: ["i", "k"],
        }),

        new Vamonos.Widget.VarName({
            container: "opt-var",
            varName: "opt",
        }),

        new Vamonos.Widget.Array({
            container: "opt",
            varName: "opt",
            displayOnly: true,
            showIndices: ["i", "k"],
        }),

        new Vamonos.Widget.VarName({
            container: "sol-var",
            varName: "sol",
            watching: true,
        }),

        new Vamonos.Widget.Array({
            container: "sol",
            varName: "sol",
            displayOnly: true,
            cssRules: [["=", "best", "dark-shaded"]],
            showIndices: ["i", "k", "best"],
            cellFormat: function(x) { return x ? "["+x.join(",")+"]" : "" }
        }),

        new Vamonos.Widget.VarName({
            container: "i-var",
            varName: "i",
        }),

        new Vamonos.Widget.VarDisplay({
            container: "i",
            varName: "i",
        }),

        new Vamonos.Widget.VarName({
            container: "k-var",
            varName: "k",
        }),

        new Vamonos.Widget.VarDisplay({
            container: "k",
            varName: "k",
        }),

        new Vamonos.Widget.Pseudocode("pseudocode"),
        new Vamonos.Widget.Controls("controls")
    ],

    algorithm: function (_) {
        with (this) {
_(1);       opt = [0]
_(2);       sol = [[]]
_(3);       for (k = 1; k < A.length; _(3), k++) {
_(4);           opt[k] = 1;
_(5);           sol[k] = [A[k]];
_(6);           for (i=1; i<k; _(6), i++) {
_(7);               if (A[i] < A[k] && opt[k] < opt[i] + 1) {
_(8);                   opt[k] = opt[i] + 1;
_(9);                   sol[k] = sol[i].concat([A[k]]);
                    }
                }
                i = undefined;
            }
            k = undefined;
_(10);      best = 1;
_(11);      for (var j = 2; j < A.length; _(11), j++) {
_(12);          if (opt[best] < opt[j]) {
_(13);              best = j;
                }
            }
            k = undefined;
        }
    }
});
</script>
</html>
